\solutionSection

Давайте перейдем к графам. Вершиной будем считать пару (клетка, направление).

Ребра будут двух типов:

\begin{itemize}
\item перейти в соседнюю клетку в соответствии с текущим направлением;
\item повернуться на $90^{\circ}$, то есть сменить направление.
\end{itemize}

Тогда задача сводится к нахождению кратчайшего расстояния в получившемся графе.
Задачу можно решить с помощью алгоритма поиска в ширину (BFS), так как вес всех ребер одинаков и равен $1$.

\codeExample

\inputPythonSource
%\inputJavaSource
%\inputCPPSource