\solutionSection

По условиям задачи нам известно количество роботов на поле, размер лабиринта по горизонтали и вертикали (в секторах), стартовые сектора каждого робота и направление каждого робота (рис. \ref{fig:01_maze_struct_01}).

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{2nd_tour/irs/04_Multiple_agents/01_maze_structure_detecting/solution/01_maze_struct_01.pdf}
	\caption{Расположение роботов на старте}
	\label{fig:01_maze_struct_01}
\end{figure}

Представим лабиринт в виде неориентированного графа, где вершины графа - сектора лабиринта. В этом случае решение задачи заключается в составлении матрицы смежности графа, т.е. возможности проезда из любого сектора в смежные сектора. На старте матрица смежности "пустая". Нумерация вершин - абсолютная, начиная с "$0$" (рис. \ref{fig:01_maze_struct_02}).

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{2nd_tour/irs/04_Multiple_agents/01_maze_structure_detecting/solution/01_maze_struct_02.pdf}
	\caption{Нумерация вершин (номер клетки = номер вершины графа)}
	\label{fig:01_maze_struct_02}
\end{figure}

Формула получения номера вершины из текущих координат робота $(x, y)$:
\begin{equation*}
cell\_number = y \cdot N_{cols} + x, \text{ где } N_{cols} \text{ - количество столбцов поля}
\end{equation*}

Например, чтобы получить номер стартовой клетки робота №1:
\begin{center}
	$cell\_number = 0 \cdot 4 + 2 = 2$
\end{center}

Для дискретной одометрии (информация о координатах робота и его направлении в текущий момент времени) для каждого робота нужно постоянно отслеживать его координаты секторов $(x, y)$ и азимут (направление движения).

Далее по командам перемещения и показаниям датчиков для каждого робота заполняем матрицу смежности. По условиям задачи роботы перемещаются одновременно, т.е. за одну итерацию каждый робот совершает 1 действие (проезд прямо или поворот). 
\\

Разберем на примере 3 первые команды для каждого робота (таблица \ref{table:01_maze_struct_01}).
\\

\begin{table}[h!]
	\begin{center}
		\begin{tabular}{|c|c|c|c|}
			\hline 
			& Робот \#1 & Робот \#2 & Робот \#3 \\ 
			\hline 
			Строка команд \#1 & F 1 1 0 & F 1 0 1 & F 0 1 1 \\ 
			\hline 
			Строка команд \#2 & R 1 0 0 & F 1 1 0 & L 0 0 1 \\ 
			\hline 
			Строка команд \#3 & F 0 0 1 & R 1 0 0 & F 1 0 1 \\ 
			\hline 
		\end{tabular} 
		\caption{Примеры команд для перемещений роботов}
		\label{table:01_maze_struct_01}
	\end{center}
\end{table}


Команда "$F\ 1\ 1\ 0$"\ обозначает, что робот проезжает прямо 1 сектор ("$F$"). Показания датчиков после остановки: слева - стена ("1"), впереди - стена("1"), справа - свободно ("0") и т.п. 

Состояние лабиринта и положение роботов после выполнения 1 строки команд показаны на рис. \ref{fig:01_maze_struct_03}.
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{2nd_tour/irs/04_Multiple_agents/01_maze_structure_detecting/solution/01_maze_struct_03.pdf}
	\caption{Состояние лабиринта и положения роботов после 1й итерации}
	\label{fig:01_maze_struct_03}
\end{figure}

\textbf{Робот \#1}, пример заполнения матрицы смежности.\\ Начальный сектор движения - $2$, после проезда прямо (робот направлен вниз), робот оказывается в секторе $6$. По показаниям датчиков корректируем матрицу смежности: 
\begin{itemize}
	\item Из сектора $2$ можно проехать в сектор $6$ $\Rightarrow$ вершины $2$ и $6$ смежные
	\item Показания датчика слева = '$1$', т.е. между секторами $6$ и $7$ стена $\Rightarrow$ вершины $6$ и $7$ не смежные.
	\item Показания датчика спереди = '$1$', т.е. между секторами $6$ и $10$ стена $\Rightarrow$ вершины $6$ и $10$ не смежные.
	\item Показания датчика справа = '$0$', т.е. из сектора $6$ можно проехать в сектор $5$ $\Rightarrow$ вершины $6$ и $5$ смежные.
\end{itemize}

Подобным образом корректируем матрицу смежности после проезда каждого робота. Также необходимо учитывать посещенные сектора и/или проверенные дальномером.\\

Лабиринт и роботы после выполнения 2 строки команд:
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{2nd_tour/irs/04_Multiple_agents/01_maze_structure_detecting/solution/01_maze_struct_04.pdf}
	\caption{Состояние лабиринта и положения роботов после 2й итерации}
	\label{fig:01_maze_struct_04}
\end{figure}

Лабиринт и роботы после выполнения 3 строки команд:
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{2nd_tour/irs/04_Multiple_agents/01_maze_structure_detecting/solution/01_maze_struct_05.pdf}
	\caption{Состояние лабиринта и положения роботов после 3й итерации}
	\label{fig:01_maze_struct_05}
\end{figure}

Лабиринт и роботы после выполнения всех команд (рис. \ref{fig:01_maze_struct_06}).
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.6\linewidth]{2nd_tour/irs/04_Multiple_agents/01_maze_structure_detecting/solution/01_maze_struct_06.pdf}
	\caption{Состояние лабиринта и положения роботов после выполнения всех итераций}
	\label{fig:01_maze_struct_06}
\end{figure}

После выполнения всех команд по перемещению роботов проверяем карту лабиринта на предмет наличия не посещенных и не проверенных дальномером секторов без явно обнаруженных стен, т.к. в этом случае мы не знаем точно - можно ли из этого сектора перемещаться в смежные сектора или нельзя, поэтому:
\begin{itemize}
	\item  Если такие сектора есть, то ответом будет количество секторов, которые проехал Робот \#1
	\item Если таких секторов нет, то через алгоритм BFS проверяем количество секторов, которые cможет посетить Робот \#1 начиная со стартовой позиции. \\
	В ответ выводим полученное количество секторов. В нашем примере это $10$.
\end{itemize}


\textbf{Ответ: 10 секторов}


\codeExample

\inputPythonSource
%\inputCPPSource