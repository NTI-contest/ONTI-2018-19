\solutionSection

Рассмотрим схему всенаправленной тележки (рис. \ref{fig:01_move_once_01}).
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{2nd_tour/irs/01_Tribot/01_move_once_started/solution/01_move_once_01.pdf}
	\caption{Схема всенаправленной тележки}
	\label{fig:01_move_once_01}
\end{figure}

У каждого мотора может быть 3 основных состояния: 'вперед', 'назад', 'выключен'.

Определим направления вращения моторов: пусть при угловой скорости $\omega_i < 0$ колеса вращаются "вперед" или по часовой стрелке (если смотреть со стороны колес), если $\omega_i > 0$, то колеса вращаются "назад" или против часовой стрелки.

По условиям задачи движение происходит без вращения робота, т.е. он двигается только прямолинейно в любом направлении. Рассмотрим комбинации угловых скоростей $(\omega)$, при которых всенаправленная тележка едет только прямо (таблица \ref{table:01_move_once_01}), при этом угловые скорости моторов $(\omega)$ должны быть или равны по модулю или у одного из моторов $\omega = 0$:

\begin{table}[H]
	\begin{center}
	\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|}
		\hline
		P1 & $\uparrow$ & $\uparrow$ & $\uparrow$ & $\uparrow$ & 0 & 0 & $\downarrow$ & $\downarrow$ & $\downarrow$ & $\downarrow$ \\
		\hline
		P2 & $\downarrow$ & $\downarrow$ & 0 & $\downarrow$ & $\downarrow$ & $\uparrow$ & $\uparrow$ & 0 & $\uparrow$ & $\uparrow$\\
		\hline
		P3 & $\uparrow$ & 0 & $\downarrow$ & $\downarrow$ & $\uparrow$ & $\downarrow$ & $\uparrow$ & $\uparrow$ & 0 & $\downarrow$\\
		\hline
	\end{tabular}

	\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|c}
		\multicolumn{11}{c}{} \\
		\multicolumn{11}{l}{где:} \\
		\multicolumn{11}{l}{$\uparrow$ - включение мотора 'вперед',} \\
		\multicolumn{11}{l}{$\downarrow$ - включение мотора 'назад',} \\
		\multicolumn{11}{l}{$0$ - мотор выключен} \\
	\end{tabular} 
	\caption{Варианты включения моторов для прямолинейного движения всенаправленной тележки}
	\label{table:01_move_once_01}
	\end{center}
\end{table}

Исходя из этих условий, мы можем использовать упрощенную кинематическую модель, в которой получаем следующие уравнения прямой кинематики (формулы \ref{eq:01_move_once_01} ) и (\ref{eq:01_move_once_02}).
\begin{equation}
	x = x_0 + \pi D \left(
	\omega_1\cdot sin(\alpha) + 
	\omega_2\cdot sin\left(\alpha-\frac{2\pi}{3} \right) + 
	\omega_3\cdot sin\left(\alpha+\frac{2\pi}{3} \right)\right) \cdot t
	\label{eq:01_move_once_01}
\end{equation}
\begin{equation}
	y = y_0 + \pi D\left(
	\omega_1\cdot cos(\alpha) + 
	\omega_2\cdot cos\left(\alpha-\frac{2\pi}{3} \right) + 
	\omega_3\cdot cos\left(\alpha+\frac{2\pi}{3} \right)\right) \cdot t
	\label{eq:01_move_once_02}
\end{equation}

Поскольку в задаче сказано, что ось первого колеса совпадает с осью $Y$, то в нашем случае $\alpha$ = $\pi$/2, тогда формулы принимают вид (формулы \ref{eq:01_move_once_03} и \ref{eq:01_move_once_04}):

\begin{equation}
	x = x_0 + \pi D\left(
	\omega_1 \cdot t_1 \cdot sin\left(\frac{\pi}{2}\right) + 
	\omega_2 \cdot t_2 \cdot sin\left(\frac{\pi}{2} - \frac{2\pi}{3}\right) + \omega_3 \cdot t_3 \cdot sin\left(\frac{\pi}{2} + \frac{2\pi}{3}\right)\right)
	\label{eq:01_move_once_03}
\end{equation}
\begin{equation}
	y = y_0 + \pi D\left(
	\omega_1 \cdot t_1 \cdot cos\left(\frac{\pi}{2}\right) + 
	\omega_2 \cdot t_2 \cdot cos\left(\frac{\pi}{2} - \frac{2\pi}{3}\right) + \omega_3 \cdot t_3 \cdot cos\left(\frac{\pi}{2} + \frac{2\pi}{3}\right)\right)
	\label{eq:01_move_once_04}
\end{equation}

где $x_0$ и $y_0$ – координаты робота на плоскости в начальный момент времени\\

После упрощения формула принимают вид: 

\begin{equation}
	x = x_0 + \pi D\left(
	\omega_1 \cdot t_1 + 
	\omega_2 \cdot t_2 \cdot cos\left(-\frac{2\pi}{3}\right) +
	\omega_3 \cdot t_3 \cdot cos\left(\frac{2\pi}{3}\right) \right)
	\label{eq:01_move_once_05}
\end{equation}

\begin{equation}
	y = y_0 + \pi D\left(
	\omega_1 \cdot t_1 + 
	\omega_2 \cdot t_2 \cdot sin\left(-\frac{2\pi}{3}\right) +
	\omega_3 \cdot t_3 \cdot sin\left(\frac{2\pi}{3}\right) \right)
	\label{eq:01_move_once_06}
\end{equation}

В какой-то момент времени один из моторов останавливается. Следовательно, необходимо выполнить две последовательные итерации вычисления координат: 
\begin{itemize}
	\item в первой итерации вращаются все три колеса
	\item во второй итерации - только два колеса (т.к. у третьего колеса $\omega = 0$)
\end{itemize}

После остановки всех моторов мы получаем конечные координаты робота $X$ и $Y$, которые и выводим в ответ.

Примеры графиков движений по наборам данных представлены на рис.\ref{fig:01_move_once_02} и \ref{fig:01_move_once_03}.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{2nd_tour/irs/01_Tribot/01_move_once_started/solution/01_move_once_02.pdf}
	\caption{График движения всенаправленной тележки (пример 1)}
	\label{fig:01_move_once_02}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\linewidth]{2nd_tour/irs/01_Tribot/01_move_once_started/solution/01_move_once_03.pdf}
	\caption{График движения всенаправленной тележки (пример 2)}
	\label{fig:01_move_once_03}
\end{figure}


\codeExample

%\inputPythonSource
\inputCPPSource