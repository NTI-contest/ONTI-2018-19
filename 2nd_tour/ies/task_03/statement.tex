\assignementTitle{Мысленный аукцион}{2}{}

\subsubsection{Матрица игры}

Основное понятие теории игр — это матрица игры.
Это, по сути, просто таблица, в которой записаны выигрыши игроков.
Чтобы разобраться, что это такое, и что такое в понимании математиков «игра», можно, например, 
прочитать статью Википедии <<Дилемма заключённого>>.

В этой задаче игры всегда асимметричные, поэтому удобно для каждого игрока выписывать свою матрицу игры, например:

\putImgWOCaption{8cm}{1}

Здесь слева — выигрыши «Игрока», а справа — выигрыши «Оппонента»

Обратите внимание, что из-за асимметричности игры, если участников поменять местами, это повлияет на результат игры!

\subsubsection{Турниры и стратегии}

Очень часто в экономике и эволюционной биологии используется понятие итеративных игр. Это игры, которые повторяются помногу раз, и участники могут запоминать, что делал их «оппонент» в прошлый раз и адаптировать своё поведение. Выигрыш в таком турнире равен сумме выигрышей в каждой игре.

В нашей задаче присутствуют самые простые варианты таких стратегий.
Мы для простоты будем использовать терминологию из дилеммы заключённого, и вариант «Б» в матрице игры мы будем считать «предательством». Но при этом неважно, является ли он «предательством» на самом деле, и является ли игра дилеммой заключённого вообще – мы это сделаем для простоты анализа ситуации.

Итак, наши стратегии: 

«Всегда А»

Независимо от действий оппонента, выбираем «А»

«Всегда Б»

Независимо от действий оппонента, выбираем «Б»

«Око за око»

Если оппонент в прошлый раз выбрал «Б», выбираем «Б», иначе выбираем «А»

«Минимакс»

Выбираем такой вариант, который обеспечивает наибольший гарантированный выигрыш вне зависимости от действий оппонента. Если варианты одинаковы, выбираем «А». 

Название «минимакс» происходит от её описания: сначала максимизируем свой выигрыш действиями оппонента, а затем минимизируем своими. Правда, в традиционной теории игры «выигрыш» — это штраф, который надо минимизировать. У нас же наоборот.

«Жадность»

Выбираем такой вариант, в котором может случиться наибольший выигрыш. Если варианты одинаковы, выбираем «А».

«Щедрость»

Так же, как «Жадность», но мы максимизируем выигрыш для оппонента. Если варианты одинаковы, выбираем «А». 

«Око за два ока»

Если оппонент выбрал «Б» оба последних раза, выбираем «Б». Иначе \linebreak выбираем «А».

«Реванш»

Выбираем такой вариант, который «побивает« предыдущий ход оппонента — мы максимизируем наш выигрыш в том случае, если оппонент повторит ход. Если варианты одинаковы, выбираем «А». В первый ход действуем как «Минимакс».

Все наши стратегии довольно «глупые» (на самом деле, «простые»), но даже такие, будучи посажены вместе, создают массу неожиданных эффектов.

\subsubsection{Условие задачи}

У вас есть несколько стратегий для итеративного турнира в несимметричную бинарную игру (а-ля дилемма заключённого):

\begin{enumerate}
    \item Всегда А
    \item Всегда Б
    \item Око за око
    \item Минимакс
    \item Жадность
    \item Щедрость
    \item Око за 2 ока
    \item Реванш
\end{enumerate}

Один турнир всегда длится 20 ходов, и стратегии, естественно, не знают и не ожидают, когда оканчивается турнир. Второй вариант стратегии всегда считают «предательством» независимо от реального содержимого матрицы игры. Вам даётся матрица игры в которой «выигрыши» — это стратегии для использования в следующем турнире, в котором «выигрыши» — это стратегии для использования в следующем турнире…

Итого у вас есть пять турниров; в матрице последнего — нормальные очки, в матрицах остальных — стратегии из набора, например:

\putImgWOCaption{8cm}{2}
\putImgWOCaption{8cm}{3}
\putImgWOCaption{8cm}{4}
\putImgWOCaption{8cm}{5}
\putImgWOCaption{8cm}{6}

Чтобы играть в таком «метатурнире» можно использовать те же самые стратегии, и для каждой из них можно вычислить математическое ожидание размера её выигрыша в случае игры против случайной стратегии в случайной позиции («Оппонент» или «Игрок»). Играть сами с собой стратегии тоже могут.

Если мы попробуем на этом основании определить стратегию, которая зарабатывает больше всего, то выяснится, что очень часто она будет делить пьедестал с другими стратегиями.

Вам нужно по заданным характеристикам турниров определить, сколько стратегий будут делить первое место.

\inputfmtSection

Пять массивов: игра 1-го уровня, 2-го, 3-го, 4-го и, наконец, игра с очками.

Одна игра — это массив из четырёх пар:

\begin{enumerate}
    \item Выигрыши игрока и оппонента в случае, если оба выбрали «А»
    \item Выигрыши игрока и оппонента в случае, если игрок выбрал «А», \linebreak а оппонент — «Б»
    \item Выигрыши игрока и оппонента в случае, если игрок выбрал «Б», \linebreak а оппонент — «А»
    \item Выигрыши игрока и оппонента в случае, если оба выбрали «Б»
\end{enumerate}

Например, массив [(74, 34), (15, 94), (83, 35), (56, 31)] превращается в матрицы игры:

\putImgWOCaption{8cm}{7}

Стратегии закодированы числами от 0 до 7 в том же порядке, в котором они шли в условии:

\begin{itemize}
    \item 0 — Всегда А
    \item 1 — Всегда Б
    \item 2 — Око за око
    \item 3 — Минимакс
    \item 4 — Жадность
    \item 5 — Щедрость
    \item 6 — Око за 2 ока
    \item 7 — Реванш
\end{itemize}

\subsubsection*{Пример входных данных}
[[(6, 0), (7, 0), (0, 1), (0, 6)], [(2, 7), (5, 2), (1, 6), (5, 3)], [(0, 7), (6, 1), (3, 3), (2, 2)], [(4, 2), (5, 1), (6, 4), (0, 1)], [(74, 34), (15, 94), (83, 35), (56, 31)]]

\subsubsection*{Пример выходных данных}
5

\subsubsection*{Ограничения вычислительных ресурсов}

Время выполнения программы на сервере не более 15 секунд.

Требуемая память на сервере не более 256 мегабайт.

\solutionSection

Задача решается снизу вверх: результатом турнира «нижнего уровня» являются очки, которые являются наградой за один тур вышестоящего турнира. После вычисления всех возможных наград для него, можно вычислить и его результат, который снова является наградой за один тур следующего турнира. Таким образом, во всех матрицах, включая верхнюю, стратегии внутри матриц можно заменить на очки, после чего просто сравнить эффективность стратегий турнире по верхней матрице. Ограничения вычислительных ресурсов несущественны.

\codeExample

Ниже представлено решение на языке Python3

\inputminted[fontsize=\footnotesize, linenos]{python}{2nd_tour/ies/task_03/source_1.py}

