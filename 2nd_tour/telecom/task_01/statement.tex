\assignementTitle{Космический вальс}{30}{}

Корабль контрабандистов А случайно подлетел к покоящемуся патрульному кораблю С по неизвестной сложной траектории, принимая при этом сигнал от радиомаяка, неподвижного и расположенного в начале «галактической» системы координат, точка $B$. Корабль $С$ также принимает сигнал от $В$. Корабли в этой галактике могут двигаться только между узлами пятиугольной решетки, параметры которой приведены на рисунках 1 и 2. Когда корабль $А$ повстречался с кораблем $С$, патруль попросил предоставить маршрут движения, с целью проверки проходил ли корабль $А$ запрещенные зоны. На корабле $А$, однако, система записи маршрута движения не работала и команда утверждала, что в запретные зоны они не заходили. Командир $С$ обратил внимание, что команда $А$ слушает и записывает музыку от радиостанции $В$. Сравнив мелодии записанные на $А$ и $С$, командиру корабля $С$ удалось восстановить траекторию движения корабля $А$ и проверить контрабандистов. Вам предлагается решить эту же задачу – определить траекторию движения корабля $А$, если известны записи мелодий на кораблях $А$ и $В$ и место старта корабля $А$. Данные передаются и принимаются пакетами, длительностью в $1/8$ и представляют собой отдельную строку текстового файла, хранящего запись мелодии, каждый пакет передается и принимается, во время движения корабля от вершине к вершине. Пример мелодии и соответствующий ей файл приведены ниже.

$pgg (22×), p2 (2222):$
\putImgWOCaption{6cm}{1}

$a = e, B + C = 180^\circ, A + D + E = 360^\circ$:
\putImgWOCaption{6cm}{2}

\inputfmtSection

\begin{itemize}
    \item Координата корабля А {xА,yА}, координата корабля С {xС,yС}. А также координаты вершин трех плиток, окружающих точку В, остальные вершины необходимо построить самостоятельно. Скорость движения корабля А.
    \item Переданный файл с корабля В;
    \item Принятый файл на корабле А.
\end{itemize}

\outputfmtSection

Файл с маршрутом движения – последовательность координат узлов, которые проходит корабль А.
Победителем является тот участник, у кого найдена траектория, обеспечивающая минимальное среднеквадратичное отклонение воспроизведенной последовательности частот от заданной траектории.

В таблице приведены нот и соответствующие им частоты.

\putImgWOCaption{17cm}{3}

\explaneSection

Мелодию будем представлять в текстовом формате, следующего вида. Например, на нужно закодировать первую строку в мелодии «Танец утят»:
\putImgWOCaption{17cm}{4}

В строках будем отмечать ноты длительностью 1/8, если нота прерывается то ставим 2, если нота продолжает звучать ставим 1, например:

\putImgWOCaption{17cm}{5}

Мелодии, записанные на кораблях А и С отличаются, так как корабль С остается неподвижным, а корабль А двигается. В этом случае на А наблюдается эффект Доплера – изменение частоты излучения, воспринимаемое наблюдателем (приёмником), вследствие движения источника излучения и/или движения наблюдателя (приёмника). Смещение частоты $df$ можно найти по следующей формуле:
$$df=\frac{f_0 V_r}{C}.$$

Например, угол между радиус-вектором $R$ и вектором скорости $V$ составляет 60 град, тогда радиальная скорость $V_r = 250 \cdot cos(60) = 125$ и $df = 50$ Гц. Если в этот момент передавалась нота Ля первой октавы (частотой 440 Гц), тогда на корабле А ее услышали на частоте $440+50=490$ Гц, так как приемник записывает только «чистые» ноты, то была записана наиболее близкая к 490 Гц нота Си (первой октавы, частота $493.88$ Гц.)

\putImgWOCaption{7cm}{6}

Для вычисления доплеровского смещения частоты необходимо найти радиальную скорость $V_r$ – проекцию скорости движения $V$ на радиус вектор $R$, направленный от А к В.

Проверка проводилась в несколько этапов(попыток), проводимых в заданную дату (20.12.2018; 29.12.2018; 06.01.2019; 11.01.2019; 14.01.2019). В каждой попытке участники могли загрузить и проверить одно свое решение этой задачи.

Результирующая оценка за задачу выбиралась, как максимальная из попыток.

Загрузка решений проводилась на сайте \url{http://dep1.iszf.irk.ru/wlcomm} на котором было установлено специальное программное обеспечение для регистрации, разделения доступа и возможности загрузки решений участниками.

Тестирование решений проводилось на виртуальной машине с установленной ОС Kubuntu, проверку и начисление баллов за каждый тест осуществляли автоматические программы.

\explanationSection

\begin{enumerate}
    \item Так как известны координаты вершин трех базовых плиток решетки вокруг начала координат, то построить решетку можно с помощью параллельных переносов и зеркальных отражений.
    \item На полученной решетке построение требуемой траектории можно с помощью небольшой модификации стандартного переборного алгоритма (\url{http://acm.mipt.ru/twiki/bin/view/Algorithms/GenerateCPP}). Модификация заключается в том, что выход из рекурсии происходит на «запрещенных» вершинах, т.е. таких вершинах переход в которые запрещен доплеровским сдвигом частоты (формула приведена в условии).
\end{enumerate}