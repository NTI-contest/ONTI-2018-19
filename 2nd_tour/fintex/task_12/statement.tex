\assignementTitle{Проверка на настоящее лицо человека}{5}{}

Насколько сложно обмануть систему распознающую лицо? Что если вместо лица живого человека перед камерой расположить фотографию лица этого человека?

Для обработки таких случаев можно, конечно, использовать камеры глубины (ссылка) или стерео-камеры (ссылка, ссылка). Таким образом получится распознать плоская картинка перед камерой или объемная.

А что если вместо фотографии будет манекен? Тогда приведенный выше способ не подойдет.

В индустрии, одним из способов добавить дополнительную безопасность в систему идентификации по лицу является определения движения - пользователь вращает или кивает головой, во время просмотра картинки - движется зрачок, изменяется мимика лица.

Имея в виду то, что MS Face API может возвращать в результате обработки лица угол, на который лицо было повернуто, можно делать выводы настоящее ли лицо человека перед камерой. Для этого в запрос для определения лица нужно добавить параметр headPose, тогда в возвращенной JSON структуре будет следующий раздел:

\begin{minted}[fontsize=\footnotesize, linenos]{css}
"headPose": {
    "roll": 2.1,
    "yaw": 3,
    "pitch": 0
},
\end{minted}

Объяснение для обозначений позиции головы можно увидеть на следующей картинке:

\putImgWOCaption{10cm}{1}

Теперь, если просить человека повернуть голову в ту или иную сторону в течение какого-то времени, то можно сравнивать реальные действия пользователя с ожидаемыми. Если совпадение действий найденно, то можно говорить о больше вероятности того, что перед камерой настоящее лицо человека.

Напишите программу, которая бы из серии изображений определяла бы те, в которых лицо пользователя повернуто или наклонено в ту или иную сторону. Поворотом лица в нужную сторону нужно считать такое положение лица, когда отклонение от нормали (достигает больше 15 градусов).

\inputfmtSection

В первой строке - одно из четырех возможных словосочетаний:

\begin{itemize}
    \item turn left - голова повёрнута (yaw на картинке вверху) влево
    \item turn right - голова повёрнута вправо
    \item roll left - голова наклонена влево
    \item roll right - голова наклонена вправо
\end{itemize}

Поворот головы в данную сторону нужно будет определить на фотографиях.

Следующая строка - ссылка на Google Drive, откуда нужно загрузить архив с фотографиями, которые нужно обработать.

\outputfmtSection

Выведите в одну строку последовательность из номеров фотографий в которых поворот головы выполнен в нужную сторону. Номера фотографий перечислены по возрастанию и разделены одним пробелом.

\subsubsection*{Комментарий}

Если изображение содержит несколько лиц, то для решения нужно брать параметры первого лица из списка, возвращаемого MS Face API. Сервис возвращает лица в порядке убывания размеров прямоугольников, в рамках которых определяется то или иное лицо на снимке. 

\begin{myverbbox}[\small]{\vinput} 
    roll left
    https://drive.google.com/open?id=1gQpdA-GEfFIZU-qqn2pFvzpBKLkdcqCP
\end{myverbbox}
\begin{myverbbox}[\small]{\voutput}
    5 9 16 18 19 22 27 39 47 54 59 63 70 79 90 92
\end{myverbbox}
\inputoutputTable

%\includeSolutionIfExistsByPath{2nd_tour/fintex/task_12}