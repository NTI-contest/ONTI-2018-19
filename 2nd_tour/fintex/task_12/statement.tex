\assignementTitle{Проверка на настоящее лицо человека}{3}

Насколько сложно обмануть систему распознающую лицо? Что если вместо лица живого человека перед камерой расположить фотографию лица этого человека?

Для обработки таких случаев можно, конечно, использовать камеры глубины (\url{https://habr.com/post/224605/}) или стерео-камеры (\url{https://habr.com/post/130}\linebreak \url{300/}, \url{https://habr.com/post/388259/}). Таким образом получится распознать плоская картинка перед камерой или объемная.

А что если вместо фотографии будет манекен? Тогда приведенный выше способ не подойдет.

В индустрии, одним из способов добавить дополнительную безопасность в систему идентификации по лицу является определения движения - пользователь вращает или кивает головой, во время просмотра картинки - движется зрачок, изменяется мимика лица.

Имея в виду то, что \textit{MS Face API} может возвращать в результате обработки лица угол, на который лицо было повернуто, можно делать выводы настоящее ли лицо человека перед камерой. Для этого в запрос для определения лица нужно добавить параметр \texttt{headPose}, тогда в возвращенной JSON структуре будет следующий раздел:

\begin{minted}[fontsize=\footnotesize]{json}
"headPose": {
    "roll": 2.1,
    "yaw": 3,
    "pitch": 0
},    
\end{minted}

Объяснение для обозначений позиции головы можно увидеть на следующей картинке:

\putImgWOCaption{5cm}{head}

Теперь, если просить человека повернуть голову в ту или иную сторону в течение какого-то времени, то можно сравнивать реальные действия пользователя с ожидаемыми. Если совпадение действий найденно, то можно говорить о больше вероятности того, что перед камерой настоящее лицо человека.

Напишите программу, которая бы из серии изображений определяла бы те, в которых лицо пользователя повернуто или наклонено в ту или иную сторону. Поворотом лица в нужную сторону нужно считать такое положение лица, когда отклонение от нормали (достигает больше $15$ градусов).

\inputfmtSection

В первой строке - одно из четырех возможных словосочетаний:
\begin{itemize}
  \item \texttt{turn left} --- голова повёрнута (yaw на картинке вверху) влево  
  \item \texttt{turn right} --- голова повёрнута вправо
  \item \texttt{roll left} --- голова наклонена влево
  \item \texttt{roll right} --- голова наклонена вправо
\end{itemize}
Поворот головы в данную сторону нужно будет определить на фотографиях.

Следующая строка - ссылка на Google Drive, откуда нужно загрузить архив с фотографиями, которые нужно обработать.

\outputfmtSection

Выведите в одну строку последовательность из номеров фотографий, в которых поворот головы выполнен в нужную сторону. Номера фотографий перечислены по возрастанию и разделены одним пробелом.

\commentsSection
Если изображение содержит несколько лиц, то для решения нужно брать параметры первого лица из списка, возвращаемого \textit{MS Face API}. Сервис возвращает лица в порядке убывания размеров прямоугольников, в рамках которых определяется то или иное лицо на снимке.

\exampleSection

\sampleTitle{1}

\begin{myverbbox}[\small]{\vinput}
roll left
https://drive.google.com/open?id=1Lo_XafOQxAIyNdmCXCC2qjg6GLQFepPr
\end{myverbbox}
\begin{myverbbox}[\small]{\voutput}
0 3 5 6 9 10 11 12 13 14 19 24 25 26 29 30 31 35
\end{myverbbox}
\inputoutputTable

\includeSolutionIfExistsByPath{2nd_tour/fintex/task_12/solution}
